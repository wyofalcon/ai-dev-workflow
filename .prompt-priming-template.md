# Prompt Priming Template for AI Coding Sessions

## Quick Context Injection
Use this template to rapidly prime AI assistants with project context, avoiding repetitive explanations.

---

## üéØ Session Purpose
**What I'm working on:** [brief 1-sentence goal]

**Expected outcome:** [what should be done by end of session]

---

## üìÅ Project Context

### Project Overview
- **Name:** CVstomize
- **Type:** AI-powered resume customization web application
- **Stack:** React (frontend) + Node.js/Express (backend) + PostgreSQL + Firebase Auth
- **Deployment:** Google Cloud Run (frontend & backend separate services)
- **Key Features:** 
  - Google SSO & email/password authentication
  - AI-driven resume generation using Gemini
  - Resume upload and gap analysis
  - Multiple PDF template exports (Modern, Classic, Minimal)
  - Resume history with search/filter
  - User profile management

### Current Branch & State
- **Branch:** `testing`
- **Last Major Changes:** [fill in based on recent work]
- **Known Issues:** [any blockers or bugs]
- **Environment:** Production URL: https://cvstomize-frontend-351889420459.us-central1.run.app

---

## üèóÔ∏è Architecture Quick Reference

### Frontend Structure (`src/`)
```
src/
‚îú‚îÄ‚îÄ components/          # React components (MUI-based)
‚îÇ   ‚îú‚îÄ‚îÄ Auth/           # Login, Signup, PasswordReset
‚îÇ   ‚îú‚îÄ‚îÄ Dashboard/      # Main dashboard components
‚îÇ   ‚îú‚îÄ‚îÄ Resume/         # Resume creation & preview
‚îÇ   ‚îú‚îÄ‚îÄ History/        # Resume history & cards
‚îÇ   ‚îî‚îÄ‚îÄ Profile/        # User profile management
‚îú‚îÄ‚îÄ contexts/           # React Context (AuthContext, etc.)
‚îú‚îÄ‚îÄ services/           # API client services
‚îú‚îÄ‚îÄ hooks/              # Custom React hooks
‚îî‚îÄ‚îÄ firebase/           # Firebase configuration
```

### Backend Structure (`api/`)
```
api/
‚îú‚îÄ‚îÄ routes/             # Express route handlers
‚îú‚îÄ‚îÄ controllers/        # Business logic
‚îú‚îÄ‚îÄ services/           # External service integrations
‚îú‚îÄ‚îÄ middleware/         # Auth, error handling, logging
‚îú‚îÄ‚îÄ prisma/            # Database schema & migrations
‚îî‚îÄ‚îÄ utils/             # Helper functions
```

### Testing Infrastructure (`tests/`)
```
tests/
‚îú‚îÄ‚îÄ autonomous-test-runner.cjs    # AI-powered Gemini testing
‚îú‚îÄ‚îÄ test-progress.json            # Test checkpoint tracking
‚îú‚îÄ‚îÄ view-test-progress.cjs        # Progress dashboard
‚îî‚îÄ‚îÄ e2e/                          # Playwright E2E tests
```

---

## üîß Development Standards (From `.ai-instructions.md`)

### Code Style
- **JavaScript:** ES6+, async/await preferred, destructuring, arrow functions
- **Components:** Functional components with hooks, no class components
- **Naming:** camelCase (variables/functions), PascalCase (components), SCREAMING_SNAKE_CASE (constants)
- **MUI Patterns:** Use `sx` prop for styling, avoid inline styles, theme-aware colors

### File Patterns
- Components: `ComponentName.js` with named exports
- Services: `serviceName.js` with named function exports
- Tests: `component.test.js` (unit) or `feature.spec.js` (E2E)

### Error Handling
- Always use try-catch for async operations
- Return meaningful error messages to frontend
- Log errors with context (userId, action, timestamp)

### Testing Requirements
- Write tests for new features (Playwright E2E + Jest unit)
- Use page object model for E2E tests
- Include positive & negative test cases
- Autonomous tests track progress in `test-progress.json`

---

## üöÄ Common Commands

### Development
```bash
# Frontend
npm start                          # Start React dev server (port 3000)
npm run build                      # Production build

# Backend
cd api && npm start                # Start Express server (port 8080)
cd api && npm run dev              # Start with nodemon

# Testing
npm run test:e2e                   # Playwright headless tests
npm run test:e2e:ui                # Playwright UI mode
npm run test:autonomous            # AI-powered autonomous tests
npm run test:autonomous:headed     # AI tests with visible browser
npm run test:progress              # View test progress dashboard

# Database
cd api && npx prisma migrate dev   # Run migrations
cd api && npx prisma studio        # Open Prisma Studio
```

### Deployment
```bash
# Frontend deployment (handled by Cloud Build)
git push origin main               # Triggers automatic deploy

# Backend deployment
cd api && ./deploy-to-cloud-run.sh # Manual backend deploy

# Git workflow
./scripts/git-sync.sh              # Stage, commit, pull, push
```

---

## üîë Key Files to Reference

### Configuration Files
- `.ai-instructions.md` - Complete coding standards & conventions
- `package.json` - Dependencies & npm scripts
- `playwright.config.js` - E2E test configuration
- `api/prisma/schema.prisma` - Database schema
- `.env.example` - Required environment variables

### Documentation Files
- `README.md` - Project overview & setup
- `TESTING.md` - Testing quick start guide
- `docs/testing/AUTONOMOUS_TESTING_GUIDE.md` - AI testing system
- `COMPLETE_UI_TESTING_GUIDE.md` - Comprehensive UI testing
- `PROJECT_STRUCTURE.md` - Detailed architecture

### Critical Implementation Files
- `src/App.js` - Main application routes
- `src/contexts/AuthContext.js` - Authentication state
- `api/index.js` - Backend entry point
- `api/routes/` - API route definitions

---

## üé® Component Patterns (MUI)

### Standard Component Structure
```javascript
import React, { useState, useEffect } from 'react';
import { Box, Typography, Button } from '@mui/material';

const ComponentName = ({ prop1, prop2 }) => {
  const [state, setState] = useState(null);

  useEffect(() => {
    // Side effects
  }, [dependencies]);

  const handleAction = async () => {
    try {
      // Logic here
    } catch (error) {
      console.error('Error:', error);
    }
  };

  return (
    <Box sx={{ padding: 2 }}>
      <Typography variant="h5">{prop1}</Typography>
      <Button onClick={handleAction}>Action</Button>
    </Box>
  );
};

export default ComponentName;
```

### Common MUI Patterns
```javascript
// Responsive spacing
sx={{ padding: { xs: 2, md: 4 } }}

// Theme colors
sx={{ color: 'primary.main', bgcolor: 'background.paper' }}

// Conditional styling
sx={{ opacity: isLoading ? 0.5 : 1 }}

// Flexbox layout
sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}
```

---

## üêõ Debugging Context

### Recent Fixes
- **Puppeteer API Fix:** Replaced `page.waitForTimeout()` with `sleep()` helper function
- [Add other recent fixes here]

### Known Issues & Workarounds
- [List any current bugs or temporary solutions]

### Common Errors
1. **"waitForTimeout is not a function"** ‚Üí Use `sleep(ms)` helper instead
2. **CORS errors** ‚Üí Check backend CORS middleware configuration
3. **Firebase auth fails** ‚Üí Verify `FIREBASE_API_KEY` in environment
4. **Test timeout** ‚Üí Increase timeout in `playwright.config.js`

---

## üß™ Testing Context

### Autonomous Testing System
- **Framework:** Puppeteer + Gemini AI (gemini-2.0-flash-exp)
- **Progress Tracking:** JSON-based checkpoint system in `test-progress.json`
- **Test Categories:** 
  1. Authentication (7 tests)
  2. Resume Generation - No Upload (6 tests)
  3. Resume Generation - With Upload (6 tests)
  4. Resume History (8 tests)
  5. Profile Management (4 tests)
  6. Downloads (6 tests)
  7. Edge Cases (5 tests)
- **Human Intervention:** System pauses for manual verification when `requiresHuman: true`
- **Resume Capability:** Tests resume from last checkpoint automatically

### Test Commands Quick Reference
```bash
# View current progress
npm run test:progress

# Run specific category
node tests/autonomous-test-runner.cjs --category authentication

# Run specific test
node tests/autonomous-test-runner.cjs --test 2.1

# Resume from last checkpoint
npm run test:autonomous --resume

# View failed tests only
node tests/view-test-progress.cjs --failed
```

---

## üí° Session-Specific Context

### What to focus on:
[Fill in: specific files, functions, or components relevant to current task]

### What to avoid:
[Fill in: areas not to touch, deprecated code, or off-limits files]

### Related PRs/Issues:
[Fill in: relevant GitHub issues, PRs, or discussions]

### Dependencies to watch:
[Fill in: external libraries or services that might affect work]

---

## üìù Quick Prompt Injections

### For Bug Fixes
```
I'm fixing [bug description]. The error occurs in [file path] around [line/function].
Current behavior: [what happens]
Expected behavior: [what should happen]
Error message: [paste error]
```

### For New Features
```
I'm adding [feature name] to [component/service]. 
Requirements: [list key requirements]
Acceptance criteria: [what defines done]
Files to modify: [list files]
```

### For Refactoring
```
I'm refactoring [code area] to [improvement goal].
Current structure: [brief description]
Target structure: [desired outcome]
Constraints: [backward compatibility, performance, etc.]
```

### For Testing
```
I need to test [feature/component].
Test type: [unit/integration/E2E/autonomous]
Test scenarios: [list scenarios]
Expected coverage: [what should be tested]
```

---

## üîÑ How to Use This Template

### Start of Session
1. Copy this template
2. Fill in "Session Purpose" section
3. Update "Session-Specific Context"
4. Share with AI assistant at start of conversation

### Mid-Session Updates
- Add notes to "Recent Fixes" as you resolve issues
- Update "Known Issues" if you discover new problems
- Track progress in "Session-Specific Context"

### End of Session
- Document any unfinished work in "What to focus on" for next session
- Update relevant files (README, documentation) if needed
- Commit changes with clear messages (follow `.ai-instructions.md` guidelines)

---

## üéØ Example: Filled Template for Current Session

### Session Purpose
**What I'm working on:** Fixing Puppeteer API compatibility in autonomous test runner

**Expected outcome:** All autonomous tests run without fatal errors, progress tracking works correctly

### Session-Specific Context
**Focus on:**
- `tests/autonomous-test-runner.cjs` - Main test orchestrator
- `tests/test-progress.json` - Checkpoint tracking file
- Puppeteer API documentation for correct method usage

**Avoid:**
- Playwright test files (separate testing system)
- Production database (use staging only)

**Recent fixes:**
- Replaced `page.waitForTimeout()` with `sleep()` helper function (Puppeteer compatibility)
- Reset test progress to clean state after failed run

**Next steps:**
- Run full test suite to verify fix
- Monitor for any additional API compatibility issues
- Update documentation if needed

---

## üöÄ Advanced: Multi-Session Context

### For Long-Running Projects
Create a session log to track progress across multiple AI conversations:

```markdown
## Session Log

### Session 1 (2025-11-16)
- Implemented autonomous testing system
- Added 50+ test scenarios
- Created progress tracking

### Session 2 (2025-11-17)
- Fixed Puppeteer API compatibility issue
- [continue tracking...]
```

---

## üìö Additional Resources

### External Documentation
- [Puppeteer API Docs](https://pptr.dev/)
- [Playwright Docs](https://playwright.dev/)
- [MUI Components](https://mui.com/material-ui/getting-started/)
- [Gemini AI API](https://ai.google.dev/gemini-api/docs)
- [Firebase Auth Docs](https://firebase.google.com/docs/auth)

### Internal Resources
- Project Wiki: [add link if exists]
- Team Slack/Discord: [add channel]
- Deployment Dashboard: [Google Cloud Console link]

---

**Last Updated:** 2025-11-16
**Template Version:** 1.0
**Maintained By:** CVstomize Development Team
